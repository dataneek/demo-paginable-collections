@page "{pageNumber?}/{itemCountPerPage?}"
@model IndexModel
@{
    ViewData["Title"] = "Home";
    
}
@using PaginableCollections;
@inject AspNetCore20.Models.ICustomerRepository CustomerRepository;

@Html.Partial("_Find")

<div>
    <ul class="pagination">
        <li>
            <a asp-page="/index" asp-route-pagenumber="1" asp-route-itemcountperpage="@Model.Input.ItemCountPerPage" asp-route-filtertext="@Model.Input.FilterText" asp-route-sortmode="@Model.Input.SortMode" asp-route-userrightids="@Model.Input.UserRightIds">First</a>
        </li>

        @foreach(var t in Model.Customers.ToPager(10).GetPages())
        {
            <li class="@(Model.Customers.PageNumber == t.PageNumber  ? "active" : "")" >
                <a asp-page="/index" asp-route-pagenumber="@t.PageNumber" asp-route-itemcountperpage="@Model.Input.ItemCountPerPage" asp-route-filtertext="@Model.Input.FilterText" asp-route-sortmode="@Model.Input.SortMode" asp-route-userrightids="@Model.Input.UserRightIds">@t.PageNumber</a>
            </li>
        }

        <li>
            <a asp-page="/index" asp-route-pagenumber="@Model.Customers.TotalPageCount" asp-route-itemcountperpage="@Model.Input.ItemCountPerPage" asp-route-filtertext="@Model.Input.FilterText" asp-route-sortmode="@Model.Input.SortMode" asp-route-userrightids="@Model.Input.UserRightIds">Last</a>
        </li>
    </ul>
</div>

@*@Html.Partial("_Pagination", Model.Customers)*@


<p>@Html.Partial("_PaginationSummary", Model.Customers)</p>

<table class="table table-hover table-striped">
    <thead>
        <tr>
            <th>#</th>
            <th>Complete Name</th>
            <th>Organization</th>
            <th>Phone Number</th>
            <th>Email</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var t in Model.Customers)
        {
            <tr>
                <td>@t.ItemNumber</td>
                <td><a asp-page="/about" asp-route-id="@t.Item.Id" asp-route-itemcountperpage="@Model.Input.ItemCountPerPage" asp-route-filtertext="@Model.Input.FilterText" asp-route-sortmode="@Model.Input.SortMode" asp-route-userrightids="@Model.Input.UserRightIds">@t.Item.LastName, @t.Item.FirstName</a></td>
                <td>@t.Item.OrganizationName</td>
                <td>@t.Item.PhoneNumber</td>
                <td>@t.Item.Email</td>
            </tr>
        }
    </tbody>
</table>


<div>
    <ul class="pagination">
        <li>
            <a asp-page="/index" asp-route-pagenumber="1">First</a>
        </li>

        @foreach(var t in Model.Customers.ToPager(10).GetPages())
        {
            <li class="@(Model.Customers.PageNumber == t.PageNumber  ? "active" : "")" >
                <a asp-page="/index" asp-route-pagenumber="@t.PageNumber">@t.PageNumber</a>
            </li>
        }

        <li>
            <a asp-page="/index" asp-route-pagenumber="@Model.Customers.TotalPageCount">Last</a>
        </li>
    </ul>
</div>